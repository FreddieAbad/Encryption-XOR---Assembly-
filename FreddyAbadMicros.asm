
;TRABAJO FINAL MICROPROCESADORES AVANZADOS
;NOMBRE: FREDDY ABAD
org 100h

;El programa realiza la captura de datos desde shell, las oculta tras un "*"
;y guarda en un archivo ubicado en C:\emu8086\MyBuild\KEEIY.TXT
;Creacion de Archivo
;GRABACION EN ARCHIVO DE LOS DATOS CAPTURADOS 
.MODEL SMALL 
    .DATA
        dia_mes db ?, '$'  
        mes db ?, '$' 
        anio dw ?, '$' 
        hora db ?, '$'
        minuto db ?, '$'
        segundo db ?, '$'
         
        anio_dig1 db ?, '$'
        anio_dig2 db ?, '$'
        anio_dig3 db ?, '$'
        anio_dig4 db ?, '$'
 
.CODE 
PROGRAMA:

;PLANTILLA SHELL <Impresiones en pantalla>
MOV AH,02H

;SALTO DE LINEA Y RETORNO DE CARRO  
MOV DL,10 
MOV ah, 02h
INT 21h
MOV dl, 13
MOV ah, 02h
INT 21H

;IMPRIME DOS TABULACIONES
mov DL,9H
INT 21H
mov DL,9H
INT 21H
mov DL,9H
INT 21H
; TRABAJO
mov DL,54H
INT 21H
mov DL,52H
INT 21H
mov DL,41H
INT 21H
mov DL,42H
INT 21H
mov DL,41H
INT 21H
mov DL,4AH
INT 21H
mov DL,4FH
INT 21H

;SALTO DE LINEA Y RETORNO DE CARRO
mov DL,10 
mov ah, 02h
INT 21h
mov dl, 13
mov ah, 02h
INT 21H
;IMPRIME DOS TABULACIONES
mov DL,9H
INT 21H
mov DL,9H
INT 21H
;MICROPROCESADORES 
mov DL,4DH
INT 21H
mov DL,49H
INT 21H
mov DL,43H
INT 21H
mov DL,52H
INT 21H
mov DL,4FH
INT 21H
mov DL,50H
INT 21H
mov DL,52H
INT 21H
mov DL,4FH
INT 21H
mov DL,43H
INT 21H
mov DL,45H
INT 21H
mov DL,53H
INT 21H
mov DL,41H
INT 21H
mov DL,44H
INT 21H
mov DL,4FH
INT 21H
mov DL,52H
INT 21H
mov DL,45H
INT 21H
mov DL,53H
INT 21H
;ESPACIO 
mov DL,20H
INT 21H
;AVANZADOS
mov DL,41H
INT 21H
mov DL,56H
INT 21H
mov DL,41H
INT 21H
mov DL,4EH
INT 21H
mov DL,5AH
INT 21H
mov DL,41H
INT 21H
mov DL,44H
INT 21H
mov DL,4FH
INT 21H
mov DL,53H
INT 21H


;SALTO DE LINEA Y RETORNO DE CARRO
mov DL,10 
mov ah, 02h
INT 21h
mov dl, 13
mov ah, 02h
INT 21H
;IMPRIME DOS TABULACIONES
mov DL,9H
INT 21H
mov DL,9H
INT 21H

;ENCRIPTACION
mov DL,45H
INT 21H
mov DL,4EH
INT 21H
mov DL,43H
INT 21H
mov DL,52H
INT 21H
mov DL,49H
INT 21H
mov DL,50H
INT 21H
mov DL,54H
INT 21H
mov DL,41H
INT 21H
mov DL,43H
INT 21H
mov DL,49H
INT 21H
mov DL,4FH
INT 21H
mov DL,4EH
INT 21H     
;ESPACIO
mov DL,20H
INT 21H     
;XOR
mov DL,58H
INT 21H
mov DL,4FH
INT 21H
mov DL,52H
INT 21H

;SALTO DE LINEA Y RETORNO DE CARRO
mov DL,10 
mov ah, 02h
INT 21h
mov dl, 13
mov ah, 02h
INT 21H
;INGRESE 4 CARACTERES
mov DL,49H
INT 21H
mov DL,4EH
INT 21H
mov DL,47H
INT 21H
mov DL,52H
INT 21H
mov DL,45H
INT 21H
mov DL,53H
INT 21H
mov DL,45H
INT 21H    
;ESPACIO
mov DL,20H
INT 21H     
;4
mov DL,34H
INT 21H    
;ESPACIO
mov DL,20H
INT 21H     
;CARACTERES
mov DL,43H
INT 21H
mov DL,41H
INT 21H
mov DL,52H
INT 21H
mov DL,41H
INT 21H
mov DL,43H
INT 21H
mov DL,54H
INT 21H
mov DL,45H
INT 21H
mov DL,52H
INT 21H
mov DL,45H
INT 21H
mov DL,53H
INT 21H


;SALTO DE LINEA Y RETORNO DE CARRO
mov DL,10 
mov ah, 02h
INT 21h
mov dl, 13
mov ah, 02h
INT 21H
;CONTRASENA:
MOV DL,43H
INT 21H
MOV DL,4FH
INT 21H
MOV DL,4EH
INT 21H
MOV DL,54H
INT 21H
MOV DL,52H
INT 21H
MOV DL,41H
INT 21H
MOV DL,53H
INT 21H
MOV DL,45H
INT 21H
MOV DL,4EH
INT 21H
MOV DL,41H
INT 21H
MOV DL,3AH
INT 21H 
MOV DL,20H
INT 21H
MOV DL,20H
INT 21H


;CAPTURA DE LETRAS DE TECLADO 
;OCULTAR TRAS ASTERISCOS
;PULSACIONES GRABADAS EN REGISTROS DESDE 1377:0200 ->
;CAPTURA 10 PULSACIONES
;APUNTA EL REGISTRO 1377
;-----------------------------------
;2ERA PULSACION
MOV AX,1377H
MOV DS,AX
;HEXADECIMAL(*): 2A
MOV DL,2AH
MOV AH,07H
INT 21H
;CAPTURA PULSACIONES EN 020NH
MOV BX,0200H
MOV [BX],AL
XOR [BX],3H
MOV AH,02H
INT 21H 
;GET
;FECHA
MOV AH,2AH
INT 21H 
MOV [dia_mes],DL
MOV [mes],DH
MOV [anio],CX
;GET
;DIA - MES
MOV AL,[dia_mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0202H  
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH 
MOV BX,0204H
MOV [BX],AX  
;GET
;NUM-MES
MOV AL,[mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0205H
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH  
MOV BX,0207H
MOV [BX],AX 

;GET
;ANO
MOV BX,offset anio
MOV AX,[BX]
MOV CL,10
DIV CL
MOV anio_dig1,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig2,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig3,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig4,AH

;PUT CADA DIGITO ANO  
;1er digito
MOV AL,[anio_dig1]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,020BH
MOV [BX],AL
INC BX
MOV [BX],AH 
;2do digito
MOV AL,[anio_dig2]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,020AH
MOV [BX],AL
INC BX
MOV [BX],AH 
;3ero digito
MOV AL,[anio_dig3]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0209H
MOV [BX],AL
INC BX
MOV [BX],AH 
;4to digito
MOV AL,[anio_dig4]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0208H
MOV [BX],AL
INC BX
MOV [BX],AH

;GET Hora
MOV AH,2CH
INT 21H
MOV [hora],CH
MOV [minuto],CL
MOV [segundo],DH

;GET Hora Actual
MOV AL,[hora]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,020FH  
MOV [BX],AL
INC BX
MOV [BX],AH  

;GET :
MOV AX,003AH  
MOV BX,0211H
MOV [BX],AX

;GET minutos
MOV AL,[minuto]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0212H  
MOV [BX],AL
INC BX
MOV [BX],AH  

;GET :
MOV AX,003AH  
MOV BX,0214H
MOV [BX],AX

;GET segundos
MOV AL,[segundo]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0215H  
MOV [BX],AL
INC BX
MOV [BX],AH

;PUT SALTO LINEA 0217H
MOV DL,0DH 
MOV BX,0217H
MOV [BX],DL

;GET SALTO LINEA TO DIRECCION: 0218H
MOV DL,0AH 
MOV BX,0218H
MOV [BX],DL

;-----------------------------------
;2DA PULSACION
MOV AX,1377H
MOV DS,AX
;HEXADECIMAL(*): 2A
MOV DL,2AH 
MOV AH,07H
INT 21H
;CAPTURA PULSACIONES EN 020NH
MOV BX,0219H
MOV [BX],AL
XOR [BX],3H
MOV AH,02H
INT 21H
;GET
;FECHA
MOV AH,2AH
INT 21H 
MOV [dia_mes],DL
MOV [mes],DH
MOV [anio],CX
;GET
;DIA - MES
MOV AL,[dia_mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,021BH  
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH 
MOV BX,021DH
MOV [BX],AX  
;GET
;NUM-MES
MOV AL,[mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,021EH
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH  
MOV BX,0220H
MOV [BX],AX 
;GET
;ANO
MOV BX,offset anio
MOV AX,[BX]
MOV CL,10
DIV CL    

;PUT CADA DIGITO ANO  
;1er digito
MOV anio_dig1,AH
MOV AH,0
MOV CL,10
DIV CL        
;2do digito
MOV anio_dig2,AH
MOV AH,0
MOV CL,10
DIV CL          
;3ero digito
MOV anio_dig3,AH
MOV AH,0
MOV CL,10
DIV CL         
;4to digito
MOV anio_dig4,AH

;1er digito  
MOV AL,[anio_dig1]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0224H
MOV [BX],AL
INC BX
MOV [BX],AH 
;2do digito
MOV AL,[anio_dig2]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0223H
MOV [BX],AL
INC BX
MOV [BX],AH 
;3ero digito
MOV AL,[anio_dig3]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0222H
MOV [BX],AL
INC BX
MOV [BX],AH 
;4to digito
MOV AL,[anio_dig4]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0221H
MOV [BX],AL
INC BX
MOV [BX],AH


;GET Hora
MOV AH,2CH
INT 21H
MOV [hora],CH
MOV [minuto],CL
MOV [segundo],DH
;GET Hora Actual
MOV AL,[hora]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0228H  
MOV [BX],AL
INC BX
MOV [BX],AH  
;GET :
MOV AX,003AH  
MOV BX,022AH
MOV [BX],AX
;GET minutos
MOV AL,[minuto]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,022BH  
MOV [BX],AL
INC BX
MOV [BX],AH  
;GET :
MOV AX,003AH  
MOV BX,022DH
MOV [BX],AX
;GET segundos
MOV AL,[segundo]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,022EH  
MOV [BX],AL
INC BX
MOV [BX],AH
;PUT SALTO LINEA 0217H
MOV DL,0DH 
MOV BX,0230H
MOV [BX],DL

;GET SALTO LINEA TO DIRECCION: 0218H
MOV DL,0AH 
MOV BX,0231H
MOV [BX],DL



;-----------------------------------
;3ER PULSACION
MOV AX,1377H
MOV DS,AX
;HEXADECIMAL(*): 2A
MOV DL,2AH
MOV AH,07H
INT 21H
;CAPTURA PULSACIONES EN 020NH
MOV BX,0232H
MOV [BX],AL 
XOR [BX],3H
MOV AH,02H
INT 21H
;GET
;FECHA
MOV AH,2AH
INT 21H 
MOV [dia_mes],DL
MOV [mes],DH
MOV [anio],CX
;GET
;DIA - MES
MOV AL,[dia_mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0234H  
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH 
MOV BX,0236H
MOV [BX],AX  
;GET
;NUM-MES
MOV AL,[mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0237H
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH  
MOV BX,0239H
MOV [BX],AX 
;GET
;ANO
MOV BX,offset anio
MOV AX,[BX]
MOV CL,10
DIV CL
MOV anio_dig1,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig2,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig3,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig4,AH
;PUT CADA DIGITO ANO  
;1er digito 
MOV AL,[anio_dig1]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,023DH
MOV [BX],AL
INC BX
MOV [BX],AH 
;2do digito
MOV AL,[anio_dig2]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,023CH
MOV [BX],AL
INC BX
MOV [BX],AH 
;3ero digito
MOV AL,[anio_dig3]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,023BH
MOV [BX],AL
INC BX
MOV [BX],AH 
;4to digito
MOV AL,[anio_dig4]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,023AH
MOV [BX],AL
INC BX
MOV [BX],AH
;GET Hora
MOV AH,2CH
INT 21H
MOV [hora],CH
MOV [minuto],CL
MOV [segundo],DH


;GET Hora Actual
MOV AL,[hora]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0241H  
MOV [BX],AL
INC BX
MOV [BX],AH  

;GET :
MOV AX,003AH  
MOV BX,0243H
MOV [BX],AX
;GET minutos
MOV AL,[minuto]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0244H  
MOV [BX],AL
INC BX
MOV [BX],AH  
;GET :
MOV AX,003AH  
MOV BX,0246H
MOV [BX],AX
;GET segundos
MOV AL,[segundo]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0247H  
MOV [BX],AL
INC BX
MOV [BX],AH

;PUT SALTO LINEA 0217H
MOV DL,0DH 
MOV BX,0249H
MOV [BX],DL

;GET SALTO LINEA TO DIRECCION: 0218H
MOV DL,0AH 
MOV BX,024AH
MOV [BX],DL

;-----------------------------------
;4TA PULSACION
MOV AX,1377H
MOV DS,AX
;HEXADECIMAL(*): 2A
MOV DL,2AH 
MOV AH,07H
INT 21H
;CAPTURA PULSACIONES EN 020NH
MOV BX,024BH
MOV [BX],AL  
XOR [BX],3H
MOV AH,02H
INT 21H
;GET
;FECHA
MOV AH,2AH
INT 21H 
MOV [dia_mes],DL
MOV [mes],DH
MOV [anio],CX
;GET
;DIA - MES
MOV AL,[dia_mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,024DH  
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH 
MOV BX,024FH
MOV [BX],AX  
;GET
;NUM-MES
MOV AL,[mes]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0250H
MOV [BX],AL
INC BX
MOV [BX],AH
;GET
;Guion /
MOV AX,002FH  
MOV BX,0252H
MOV [BX],AX 
;GET
;ANO
MOV BX,offset anio
MOV AX,[BX]
MOV CL,10
DIV CL
MOV anio_dig1,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig2,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig3,AH
MOV AH,0
MOV CL,10
DIV CL
MOV anio_dig4,AH
;PUT CADA DIGITO ANO  
;1er digito
MOV AL,[anio_dig1]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0256H
MOV [BX],AL
INC BX
MOV [BX],AH 
;2do digito
MOV AL,[anio_dig2]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0255H
MOV [BX],AL
INC BX
MOV [BX],AH 
;3ero digito
MOV AL,[anio_dig3]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0254H
MOV [BX],AL
INC BX
MOV [BX],AH 
;4to digito
MOV AL,[anio_dig4]
MOV AH,0
DIV CL
OR  AX,3030H   
MOV BX,0253H
MOV [BX],AL
INC BX
MOV [BX],AH
;GET Hora
MOV AH,2CH
INT 21H
MOV [hora],CH
MOV [minuto],CL
MOV [segundo],DH
;GET Hora Actual
MOV AL,[hora]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,025AH  
MOV [BX],AL
INC BX
MOV [BX],AH  
;GET :
MOV AX,003AH  
MOV BX,025CH
MOV [BX],AX
;GET minutos
MOV AL,[minuto]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,025DH  
MOV [BX],AL
INC BX
MOV [BX],AH  
;GET :
MOV AX,003AH  
MOV BX,025FH
MOV [BX],AX
;GET segundos
MOV AL,[segundo]
MOV CL,10
MOV AH,0
DIV CL
OR  AX,3030h
MOV BX,0260H  
MOV [BX],AL
INC BX
MOV [BX],AH

;PUT SALTO LINEA 0217H
MOV DL,0DH 
MOV BX,0262H
MOV [BX],DL

;GET SALTO LINEA TO DIRECCION: 0218H
MOV DL,0AH 
MOV BX,0263H
MOV [BX],DL




;INDICAR NOMBRE EN LA POSICION 0300
;EL NOMBRE ES KEEIY.TXT

MOV AX,454BH
;POSICION
MOV BX,0300H
MOV [BX],AX
MOV AX,4945H
MOV BX,0302H 

MOV [BX],AX
MOV AX,2E59H
MOV BX,0304H  

MOV [BX],AX
MOV AX,5854H
MOV BX,0306H 

MOV [BX],AX  
MOV AX,0054H
MOV BX,0308H
MOV [BX],AX                                                    
        
MOV AX,0054H
MOV BX,0310
MOV [BX],AX

;CREACION DE ARCHIVO CON EL NOMBRE DE LA 0300
MOV AX,0000H
MOV CX,AX
MOV AH,3CH
MOV DX,0300H
INT 21H

;GRABACION DE LOS DATOS DE LA POSICION 0200 HACIA EL ARCHIVO
MOV BX,AX
MOV AH,40H
MOV CX,0094H  ;SE GRABARAN 7 DATOS
MOV DX,0200H
INT 21H

MOV AH,4CH
INT 21H
.STACK
END PROGRAMA



ret




